function fb_login(){FB.login(function(e){e.authResponse?(console.log("Welcome!  Fetching your information.... "),showFBLoginSpinner(),access_token=e.authResponse.accessToken,user_id=e.authResponse.userID,console.log("FBID: "+user_id),FB.api("/me",function(e){user_email=e.email,console.log("First name: "+e.first_name),console.log("Last name: "+e.last_name),console.log("Email: "+user_email),$.ajax({url:"/login/fb_login",type:"POST",data:{fb_info:{id:user_id,first_name:e.first_name,last_name:e.last_name,email:e.email}},success:function(e){e&&(url=e.redir_path,url?window.location=url:alert("No redir_path passed back"))}})})):(console.log("User cancelled login or did not fully authorize."),hideFBLoginSpinner())},{scope:"publish_stream,email"})}window.fbAsyncInit=function(){FB.init({appId:"398320236951675",channelUrl:"/channel.html",status:!0,xfbml:!0})},function(e,n,o){var t,a=e.getElementsByTagName(n)[0];e.getElementById(o)||(t=e.createElement(n),t.id=o,t.src="//connect.facebook.net/en_US/all.js",a.parentNode.insertBefore(t,a))}(document,"script","facebook-jssdk"),function(){var e=document.createElement("script");e.src=document.location.protocol+"//connect.facebook.net/en_US/all.js",e.async=!0,document.getElementById("fb-root")&&document.getElementById("fb-root").appendChild(e)}();